{"version":3,"sources":["shadow/markup/react/impl/interop.cljs"],"mappings":";;;;;AAIA,AAAsBA,+GAChB,8CAAA,MAAA,pDAACC,7DACD,uHAAA,vHAACC;AAEP,kDAAA,lDAAMC,4GAAUC;AAAhB,AACE,SAAK,AAACC,wBAAQD,QACT,AAACE,6CAAEN,gDAAe,+DAAA,/DAACE,6DAASE;;AAEnC,iDAAA,jDAAMG,0GAAeC;AAArB,AACE,GACE,UAAA,TAAMA;AADR;;AAAA,GAGE,AAACC,qBAAKD;AACN,OAACE,qBAAQF;;AAJX,AAMEA;;;;;AAIJ,wDAAA,xDAAMI,wHAAiBC;AAAvB,AAAA,GACS,AAACC,uBAAOD;AADjB;AAAA,AAAA,MAAA,KAAAF,MAAA;;;AAEE,2DAAA,pDAAQV,yDAAwBY;;AAElC,oDAAA,pDAAME,gHAAaF,IAAIT;AAAvB,AACE,AAAOS,SAAIT;;AACXS;;AAEF,8CAAA,9CAAMG,oGAAYH,IAAII;AAAtB,AACE,OAACC,+CAAOH,kDAAYF,IAAII;;AAG1B,kDAAA,lDAAME,4GAAgBC,KAAKC;AAA3B,AACE,IAAAC,aAAoBD;IAApBE,aAAA,AAAAC,cAAAF;IAAAG,eAAA,AAAAC,gBAAAH;IAAAA,iBAAA,AAAAI,eAAAJ;WAAAE,PAAOG;WAAPL,PAAcN;AAAd,AACE,GACE,AAACR,qBAAKmB;AACN,OAAChB,sDACC,iBAAAiB,WAAA,CAAWT,KAAK,AAACb,+CAAcqB;AAA/B,AAAA,4CAAAC,5CACGb,qDAAWC;;AADdY;;;AAHJ,GAME,SAAA,RAAMD;AACN,OAAChB,sDACC,iBAAAkB,WAAA,MAAA,LAAWV;AAAX,AAAA,4CAAAU,5CACGd,qDAAWC;;AADda;;;AARJ,GAWE,AAAC3B,gDAASyB;AACV,OAAChB,sDACC,iBAAAmB,WAAA,MAAA,LAAWX;AAAX,AAAA,4CAAAW,5CACGf,qDAAWK;;AADdU;;;AAbJ,GAgBE,AAAC1B,wBAAQuB;AACT,OAAChB,sDACC,iBAAAoB,WAAA,CAAWZ,KAAKQ;AAAhB,AAAA,4CAAAI,5CACGhB,qDAAWC;;AADde;;;AAlBJ,AAsBE,OAACpB,sDACC,iBAAAqB,WAAA,MAAA,LAAWb;AAAX,AAAA,4CAAAa,5CACGjB,qDAAWK;;AADdY","names":["shadow.markup.react.impl.interop/element-marker","js/module$node_modules$react$index.createElement","shadow.markup.react.impl.interop.goog$module$goog$object.get","shadow.markup.react.impl.interop/element?","x","cljs.core/object?","cljs.core._EQ_","shadow.markup.react.impl.interop/convert-props","props","cljs.core/map?","cljs.core/clj->js","js/Error","shadow.markup.react.impl.interop/create-element*","arr","cljs.core/array?","shadow.markup.react.impl.interop/arr-append*","shadow.markup.react.impl.interop/arr-append","tail","cljs.core.reduce","shadow.markup.react.impl.interop/create-element","type","args","vec__22905","seq__22906","cljs.core/seq","first__22907","cljs.core/first","cljs.core/next","head","G__22909","G__22912","G__22914","G__22917","G__22918"],"sourcesContent":["(ns shadow.markup.react.impl.interop\n  (:require [goog.object :as gobj]\n            [\"react\" :as react]))\n\n(def ^{:private true} element-marker\n  (-> (react/createElement \"div\" nil)\n      (gobj/get \"$$typeof\")))\n\n(defn element? [x]\n  (and (object? x)\n       (= element-marker (gobj/get x \"$$typeof\"))))\n\n(defn convert-props [props]\n  (cond\n    (nil? props)\n    #js {}\n    (map? props)\n    (clj->js props)\n    :else\n    props))\n\n;; called from macro\n;; react v16 is really picky, the old direct .children prop trick no longer works\n(defn create-element* [arr]\n  {:pre [(array? arr)]}\n  (.apply react/createElement nil arr))\n\n(defn arr-append* [arr x]\n  (.push arr x)\n  arr)\n\n(defn arr-append [arr tail]\n  (reduce arr-append* arr tail))\n\n;; fallback if the macro didn't do this\n(defn create-element [type args]\n  (let [[head & tail] args]\n    (cond\n      (map? head)\n      (create-element*\n        (doto #js [type (convert-props head)]\n          (arr-append tail)))\n\n      (nil? head)\n      (create-element*\n        (doto #js [type nil]\n          (arr-append tail)))\n\n      (element? head)\n      (create-element*\n        (doto #js [type nil]\n          (arr-append args)))\n\n      (object? head)\n      (create-element*\n        (doto #js [type head]\n          (arr-append tail)))\n\n      :else\n      (create-element*\n        (doto #js [type nil]\n          (arr-append args)))\n      )))\n\n"]}